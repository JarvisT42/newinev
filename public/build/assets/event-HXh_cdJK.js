import{K as N,r as n,m as E,j as e,L as y}from"./app-BXYE1KyV.js";import{B as d}from"./app-logo-icon-TfPTolar.js";import{L as u,I as x}from"./label-CyN-IeJX.js";import{A as w}from"./app-layout-Cn1E0tsp.js";import{F as C,i as L}from"./index-Bsi4vXtJ.js";import"./index-aVpXc2mF.js";import"./index-CtL9CVFH.js";import"./index-Ddj7YzvB.js";const S=[{title:"Event",href:"/user/dashboard"}];function R(){const{events:v}=N().props,[r,s]=n.useState(!1),[i,o]=n.useState(""),l=n.useRef(null),h=v.map(t=>({title:t.title,date:t.event_date})),{data:c,setData:m,post:p,processing:f,errors:a,reset:j}=E({title:"",event_date:""}),g=t=>{t.preventDefault(),p(route("events.store"),{onSuccess:()=>{o("Event created successfully!"),s(!1),j(),setTimeout(()=>o(""),5e3)}})};return n.useEffect(()=>{const t=b=>{l.current&&!l.current.contains(b.target)&&s(!1)};return r&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[r]),e.jsxs(w,{breadcrumbs:S,children:[e.jsx(y,{title:"Event"}),i&&e.jsx("div",{className:"mb-4 rounded-md bg-green-100 px-4 py-2 text-green-800",children:i}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"grid auto-rows-min gap-4",children:e.jsx("div",{className:"relative rounded-xl border border-gray-300 p-4 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Event Management"}),e.jsx(d,{variant:"outline",onClick:()=>s(!0),children:"Add Events"})]})})}),e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 p-4",children:e.jsx(C,{plugins:[L],initialView:"dayGridMonth",weekends:!0,height:"800px",events:h})})]}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{ref:l,className:"w-full max-w-lg rounded-lg bg-white p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Add Event"}),e.jsxs("form",{className:"grid gap-4",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"eventName",children:"Event Name"}),e.jsx(x,{id:"eventName",value:c.title,onChange:t=>m("title",t.target.value),placeholder:"Enter event name"}),a.title&&e.jsx("p",{className:"text-sm text-red-500",children:a.title})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"eventDate",children:"Date"}),e.jsx(x,{id:"eventDate",type:"date",value:c.event_date,onChange:t=>m("event_date",t.target.value)}),a.event_date&&e.jsx("p",{className:"text-sm text-red-500",children:a.event_date})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(d,{type:"submit",disabled:f,children:"Save"})]})]})]})})]})}export{R as default};
